<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
    }

    header {
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 10px;
    }

    #map-container {
      position: relative;
      width: 100%;
      overflow: hidden;
    }

    #campus-map {
      width: 100%;
      height: auto;
      display: block;
    }

    .user-marker {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: red; /* or any color you prefer */
      border-radius: 50%;
    }
  </style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
      showError("Geolocation is not supported by this browser.");
    }

    function showPosition(position) {
      const userLatitude = position.coords.latitude;
      const userLongitude = position.coords.longitude;

      // Display user coordinates in the header
      const userCoordinatesElement = document.getElementById("user-coordinates");
      userCoordinatesElement.innerText = `Latitude: ${userLatitude.toFixed(5)}, Longitude: ${userLongitude.toFixed(5)}`;

      // Check if the user is within the map boundaries
      if (isWithinMapBounds(userLatitude, userLongitude)) {
        // Display user marker on the map
        const marker = document.createElement("div");
        marker.className = "user-marker";
        marker.style.top = calculateTopPosition(userLatitude) + "px";
        marker.style.left = calculateLeftPosition(userLongitude) + "px";
        document.getElementById("map-container").appendChild(marker);
      } else {
        // Display message if the user is outside the map boundaries
        userCoordinatesElement.innerText = "User not within the map boundaries.";
      }
    }

    function showError(error) {
      console.log(error.message);
      // Handle geolocation errors as needed
    }

    function isWithinMapBounds(latitude, longitude) {
      // Check if the coordinates are within the specified bounds
      const mapBounds = {
        top: 48.74115,
        left: -122.49112,
        bottom: 48.72629,
        right: -122.48200
      };

      return (
        latitude >= mapBounds.bottom &&
        latitude <= mapBounds.top &&
        longitude >= mapBounds.left &&
        longitude <= mapBounds.right
      );
    }

    function calculateTopPosition(latitude) {
      // Calculate the top position of the user marker based on latitude
      const mapBounds = {
        top: 48.74115,
        bottom: 48.72629
      };

      const mapHeight = 3529; // Adjust according to the actual map image size
      const percentageFromBottom = (latitude - mapBounds.bottom) / (mapBounds.top - mapBounds.bottom);
      return mapHeight - (percentageFromBottom * mapHeight);
    }

    function calculateLeftPosition(longitude) {
      // Calculate the left position of the user marker based on longitude
      const mapBounds = {
        left: -122.49112,
        right: -122.48200
      };

      const mapWidth = 1421; // Adjust according to the actual map image size
      const percentageFromLeft = (longitude - mapBounds.left) / (mapBounds.right - mapBounds.left);
      return percentageFromLeft * mapWidth;
    }
  });
</script>

</head>
<body>

  <header>
    <h1 id="user-coordinates">User Coordinates</h1>
  </header>

  <div id="map-container">
    <img id="campus-map" src="map3.webp" alt="Campus Map">
  </div>

</body>
</html>
